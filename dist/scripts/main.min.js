"use strict";function getClosestTime(e,t){for(var n=t[0],r=1;r<t.length;r++){if(e>n&&(n=t[r]),t[r]===e)return void(n=e);t[r]>e&&t[r]<n&&(n=t[r])}return n}function getTimeTillNext(e,t){var n=moment(e,"HH:mm:ss"),r=moment(t,"HH:mm:ss"),o=moment(r.diff(n)).format("mm:ss");return o}function getNextSubwayTime(){getSubwaySchedule(SUBWAY_ID).then(function(e){var t=e.data.result.arrivals,n=moment(),r=n.format("HH:mm:ss"),o=getClosestTime(r,t),i=getTimeTillNext(r,o);renderNext(i)})["catch"](function(e){renderError(e)})}function getSubwaySchedule(e){return axios.get("http://mtaapi.herokuapp.com/api?id="+e)}function renderNext(e){times_first.innerHTML=formatTextResponse(e)+"min",console.log("The next subway is in "+e)}function renderError(e){console.error(data)}function formatTextResponse(e){return e=e.split(":"),e=e[0],"0"==e[0]&&(e=e[1]),e}function loop(){getNextSubwayTime(),setInterval(getNextSubwayTime,REFRESH_TIMER)}var SUBWAY_ID="G26N",REFRESH_TIMER=1e4,times_first=document.getElementById("subway-times_first"),times_second=document.getElementById("subway-times_second");loop();